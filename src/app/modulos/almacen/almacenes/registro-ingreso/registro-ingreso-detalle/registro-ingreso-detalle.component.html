<div class="clsprincipal">
    <div class="col-md-10 offset-md-1">
        <h5 class="card-header" style="text-align: center; width: 100%; margin-bottom: 5px">
            {{sTitulo}}
        </h5>
        <!-- <div class="row"><br /></div> -->
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <!-- Cabecera -->
        <div class="col-md-10 offset-md-1">
            <!-- offset-md-3 -->

            <mat-card>
                <!--Form cuando se va a ver registrar-->
                <form class="row" *ngIf="pIdRegistro == 0" [formGroup]="formIngreso">
                    <div class="col-md-10">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem"
                                    (change)="fnListarSolicitante($event); fnSetCliente($event);" appendTo="body"
                                    [clearable]="false" formControlName="cboPresupuesto" placeholder="Presupuesto"
                                    required>
                                    <ng-option *ngFor="let vPres of lPresupuesto" [value]="vPres">
                                        {{ vPres.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngreso.get('cboPresupuesto').hasError('required') && formIngreso.get('cboPresupuesto').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Cliente:</mat-label>
                                    <input type="text" style="color: rgb(236, 0, 140);" readonly matInput
                                        formControlName="txtCliente" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem" appendTo="body"
                                    [clearable]="false" formControlName="cboSolicitante" placeholder="Solicitante"
                                    required>
                                    <ng-option *ngFor="let vSolicitante of lSolicitante" [value]="vSolicitante.nId">
                                        {{ vSolicitante.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngreso.get('cboSolicitante').hasError('required') &&formIngreso.get('cboSolicitante').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem"
                                    (change)="fnListarOpLogistica($event); fnMostrarUbicacion($event)" appendTo="body"
                                    [clearable]="false" formControlName="cboAlmacen" placeholder="Almacen" required>
                                    <ng-option *ngFor="let vAlmacen of lAlmacen" [value]="vAlmacen">
                                        {{ vAlmacen.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngreso.get('cboAlmacen').hasError('required') &&formIngreso.get('cboAlmacen').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem" appendTo="body"
                                    [clearable]="false" formControlName="cboOperacionLogistica"
                                    placeholder="Operación Logística" required>
                                    <ng-option *ngFor="let vOpLog of lOpLogistica" [value]="vOpLog.nId">
                                        {{ vOpLog.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngreso.get('cboOperacionLogistica').hasError('required') &&formIngreso.get('cboOperacionLogistica').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha de Ingreso:</mat-label>
                                    <input
                                        (click)="pickerFechaIngreso.opened?pickerFechaIngreso.close(): pickerFechaIngreso.open()"
                                        readonly formControlName="cboFechaIngreso" matInput
                                        [matDatepicker]="pickerFechaIngreso" />
                                    <mat-datepicker-toggle matSuffix [for]="pickerFechaIngreso">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #pickerFechaIngreso></mat-datepicker>
                                    <mat-error *ngIf="formIngreso.get('cboFechaIngreso').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>GR:</mat-label>
                                    <mat-select formControlName="cboTipoGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vTipo of lTipoGuia" [value]="vTipo.nId">
                                            {{ vTipo.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formIngreso.get('cboTipoGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia1', formIngreso, 4)" type="text"
                                        matInput formControlName="txtNumGuia1" />
                                    <mat-error *ngIf="formIngreso.get('txtNumGuia1').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formIngreso.get('txtNumGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia2', formIngreso, 10)" type="text"
                                        matInput formControlName="txtNumGuia2" />
                                    <mat-error *ngIf="formIngreso.get('txtNumGuia2').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formIngreso.get('txtNumGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>FV:</mat-label>
                                    <mat-select formControlName="cboDocGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vDoc of lDocGuia" [value]="vDoc.nId">
                                            {{ vDoc.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formIngreso.get('cboDocGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia1', formIngreso, 4)" type="text"
                                        matInput formControlName="txtDocGuia1" />
                                    <mat-error *ngIf="formIngreso.get('txtDocGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia2', formIngreso, 10)" type="text"
                                        matInput formControlName="txtDocGuia2" />
                                    <mat-error *ngIf="formIngreso.get('txtDocGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Observaciones:</mat-label>
                                    <input (input)="fnDarValor(formIngreso, 'txtObservacion', $event)" type="text"
                                        matInput formControlName="txtObservacion" />
                                    <mat-error *ngIf="formIngreso.get('txtObservacion').hasError('caracterValidator')">
                                        .El texto no debe contener: "/", "|", "?"</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-3 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Unidades:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-3 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Peso:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-3 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Volumen:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalVolumen" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-3 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Precio:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                </mat-form-field>
                            </div>

                            <!--Informacion en celular-->
                            <div class="col-md-12 mostrar-mobile">
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                            Datos
                                        </mat-panel-title>
                                        <button mat-icon-button>
                                            <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                        </button>
                                    </mat-expansion-panel-header>
                                    <div class="row">
                                        <div class="form-group col-md-4 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Observaciones:</mat-label>
                                                <input (input)="fnDarValor(formIngreso, 'txtObservacion', $event)"
                                                    type="text" matInput formControlName="txtObservacion" />
                                                <mat-error
                                                    *ngIf="formIngreso.get('txtObservacion').hasError('caracterValidator')">
                                                    .El texto no debe contener: "/", "|", "?"</mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Unidades:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Peso:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Volumen:</mat-label>
                                                <input type="text" readonly matInput
                                                    formControlName="txtTotalVolumen" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Precio:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                            </div>

                            <div class="col-md-12 mostrar-mobile">
                                <br>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en desktop-->
                    <div class="col-md-2 ocultar-mobile">
                        <div class="form-row">
                            <div class="col-md-1">
                                <div class="clsSeparador">&nbsp;</div>
                            </div>

                            <!-- Campos auditoria -->
                            <div class="col-md-11">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtNumero" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Doc. Referencia:</mat-label>
                                    <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                        formControlName="txtDocRef" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Estado:</mat-label>
                                    <input type="text" readonly matInput placeholder="Estado"
                                        formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                        [errorStateMatcher]="matcher" />
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en celular-->
                    <div class="col-md-12 mostrar-mobile">
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Información
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-md-12">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Número:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtNumero" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Doc. Referencia:</mat-label>
                                        <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                            formControlName="txtDocRef" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Fecha Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Estado:</mat-label>
                                        <input type="text" readonly matInput placeholder="Estado"
                                            formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                            [errorStateMatcher]="matcher" />
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </div>
                    <div class="col-md-12 mostrar-mobile">
                        <br>
                    </div>

                    <div class="col-md-12">
                        <mat-expansion-panel #matExpUbicacion>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Ubicación proveedor
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">location_on</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="form-group col-md-4">
                                    <ng-select style="padding-bottom:3.5px; bottom:0.8rem"
                                        (change)="fnListarDireccion($event)" appendTo="body" [clearable]="false"
                                        formControlName="cboProveedor" placeholder="Proveedor" required>
                                        <ng-option *ngFor="let vProveedor of lProveedor" [value]="vProveedor">
                                            {{ vProveedor.sDescripcion }}
                                        </ng-option>
                                    </ng-select>
                                    <mat-error
                                        *ngIf="formIngreso.get('cboProveedor').hasError('required') &&formIngreso.get('cboProveedor').touched">
                                        .Obligatorio
                                    </mat-error>
                                </div>

                                <div class="form-group col-md-4">
                                    <ng-select style="padding-bottom:3.5px; bottom:0.8rem" appendTo="body"
                                        [clearable]="false" formControlName="cboPuntoRecup"
                                        placeholder="Punto proveedor" required>
                                        <ng-option *ngFor="let vPunto of lPuntoRecup" [value]="vPunto">
                                            {{ vPunto.sCodigo }} - {{ vPunto.sDestino }}
                                        </ng-option>
                                    </ng-select>
                                    <mat-error
                                        *ngIf="formIngreso.get('cboPuntoRecup').hasError('required') &&formIngreso.get('cboPuntoRecup').touched">
                                        .Obligatorio
                                    </mat-error>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Ubicación:</mat-label>
                                        <input [value]="fnUbicacion" type="text" readonly matInput
                                            formControlName="txtUbicación" />
                                    </mat-form-field>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Dirección:</mat-label>
                                        <input [value]="fnDireccion" type="text" readonly matInput
                                            formControlName="txtDireccion" />
                                    </mat-form-field>
                                </div>

                            </div>
                        </mat-expansion-panel>
                    </div>

                    <div class="col-md-12">
                        <br>
                    </div>
                </form>

                <!--Form cuando se va a ver detalle, OC, Guia lucky-->
                <form class="row" *ngIf="pIdRegistro != 0 && (!bEsNotaIngreso && !bEsNotaRecojo)"
                    [formGroup]="formIngresoDetalle">
                    <div class="col-md-10">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Presupuesto:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtPresupuesto" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Cliente:</mat-label>
                                    <input type="text" style="color: rgb(236, 0, 140);" readonly matInput
                                        formControlName="txtCliente" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Solicitante:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtSolicitante" />
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra || bEsGuiaLucky" class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem"
                                    (change)="fnListarOpLogistica($event)" appendTo="body" [clearable]="false"
                                    formControlName="cboAlmacen" placeholder="Almacen" required>
                                    <ng-option *ngFor="let vAlmacen of lAlmacen" [value]="vAlmacen">
                                        {{ vAlmacen.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngresoDetalle.get('cboAlmacen').hasError('required') &&formIngresoDetalle.get('cboAlmacen').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div *ngIf="!bEsOrdenCompra && !bEsGuiaLucky" class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Almacén:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtAlmacen" />
                                </mat-form-field>
                            </div>

                            <div *ngIf="!bEsGuiaSalida && !bEsOrdenCompra && !bEsGuiaLucky" class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Operación Logística:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtOperacionLogistica" />
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsGuiaSalida || bEsOrdenCompra || bEsGuiaLucky" class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem" appendTo="body"
                                    [clearable]="false" formControlName="cboOperacionLogistica"
                                    placeholder="Operación Logística" required>
                                    <ng-option *ngFor="let vOpLog of lOpLogistica" [value]="vOpLog.nId">
                                        {{ vOpLog.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formIngresoDetalle.get('cboOperacionLogistica').hasError('required') &&formIngresoDetalle.get('cboOperacionLogistica').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div *ngIf="bEsOrdenCompra || (!bEsGuiaLucky && !bEsGuiaSalida)"
                                class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha de Ingreso:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFechaIngreso" />
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsGuiaSalida || bEsGuiaLucky" class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha de Ingreso:</mat-label>
                                    <input
                                        (click)="pickerFechaIngresoSalida.opened?pickerFechaIngresoSalida.close(): pickerFechaIngresoSalida.open()"
                                        readonly formControlName="cboFechaIngreso" matInput
                                        [matDatepicker]="pickerFechaIngresoSalida" />
                                    <mat-datepicker-toggle matSuffix [for]="pickerFechaIngresoSalida">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #pickerFechaIngresoSalida></mat-datepicker>
                                    <mat-error *ngIf="formIngresoDetalle.get('cboFechaIngreso').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra" class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>GR:</mat-label>
                                    <mat-select formControlName="cboTipoGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vTipo of lTipoGuia" [value]="vTipo.nId">
                                            {{ vTipo.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formIngresoDetalle.get('cboTipoGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra" class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia1', formIngresoDetalle, 4)"
                                        type="text" matInput formControlName="txtNumGuia1" />
                                    <mat-error *ngIf="formIngresoDetalle.get('txtNumGuia1').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formIngresoDetalle.get('txtNumGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra" class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia2', formIngresoDetalle, 10)"
                                        type="text" matInput formControlName="txtNumGuia2" />
                                    <mat-error *ngIf="formIngresoDetalle.get('txtNumGuia2').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formIngresoDetalle.get('txtNumGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="!bEsOrdenCompra" class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Guia Referencia:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtGuiaRef" />
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra || bEsGuiaLucky" class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>FV:</mat-label>
                                    <mat-select formControlName="cboDocGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vDoc of lDocGuia" [value]="vDoc.nId">
                                            {{ vDoc.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formIngresoDetalle.get('cboDocGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra || bEsGuiaLucky" class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia1', formIngresoDetalle, 4)"
                                        type="text" matInput formControlName="txtDocGuia1" />
                                    <mat-error *ngIf="formIngresoDetalle.get('txtDocGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div *ngIf="bEsOrdenCompra || bEsGuiaLucky" class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia2', formIngresoDetalle, 10)"
                                        type="text" matInput formControlName="txtDocGuia2" />
                                    <mat-error *ngIf="formIngresoDetalle.get('txtDocGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>


                            <div *ngIf="!bEsOrdenCompra && !bEsGuiaLucky" class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Factura Referencia:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFactRef" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Observaciones:</mat-label>
                                    <input type="text"
                                        (input)="fnDarValor(formIngresoDetalle, 'txtObservacion', $event)"
                                        [readonly]="!bEsGuiaSalida && !bEsOrdenCompra &&!bEsGuiaLucky" matInput
                                        formControlName="txtObservacion" />
                                    <mat-error
                                        *ngIf="formIngresoDetalle.get('txtObservacion').hasError('caracterValidator')">
                                        .El texto no debe contener: "/", "|", "?"</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Observaciones Doc. Referencia:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtObservacionDocRef" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Unidades:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Peso:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Volumen:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalVolumen" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Precio:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                </mat-form-field>
                            </div>

                            <!--Informacion en celular-->
                            <div class="col-md-12 mostrar-mobile">
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                            Datos
                                        </mat-panel-title>
                                        <button mat-icon-button>
                                            <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                        </button>
                                    </mat-expansion-panel-header>
                                    <div class="row">
                                        <div class="form-group col-md-4">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Observaciones:</mat-label>
                                                <input
                                                    (input)="fnDarValor(formIngresoDetalle, 'txtObservacion', $event)"
                                                    type="text" matInput formControlName="txtObservacion" />
                                                <mat-error
                                                    *ngIf="formIngreso.get('txtObservacion').hasError('caracterValidator')">
                                                    .El texto no debe contener: "/", "|", "?"</mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-4 ocultar-mobile">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Observaciones Doc. Referencia:</mat-label>
                                                <input type="text" readonly matInput
                                                    formControlName="txtObservacionDocRef" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Unidades:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Peso:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Volumen:</mat-label>
                                                <input type="text" readonly matInput
                                                    formControlName="txtTotalVolumen" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Precio:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                            </div>

                            <div class="col-md-12 mostrar-mobile">
                                <br>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en desktop-->
                    <div class="col-md-2 ocultar-mobile">
                        <div class="form-row">
                            <div class="col-md-1">
                                <div class="clsSeparador">&nbsp;</div>
                            </div>

                            <!-- Campos auditoria -->
                            <div class="col-md-11">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtNumero" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Doc. Referencia:</mat-label>
                                    <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                        formControlName="txtDocRef" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Estado:</mat-label>
                                    <input type="text" readonly matInput placeholder="Estado"
                                        formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                        [errorStateMatcher]="matcher" />
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en celular-->
                    <div class="col-md-12 mostrar-mobile">
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Información
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-md-12">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Número:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtNumero" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Doc. Referencia:</mat-label>
                                        <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                            formControlName="txtDocRef" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Fecha Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Estado:</mat-label>
                                        <input type="text" readonly matInput placeholder="Estado"
                                            formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                            [errorStateMatcher]="matcher" />
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </div>

                    <div class="col-md-12 mostrar-mobile">
                        <br>
                    </div>

                    <div class="col-md-12">
                        <mat-expansion-panel #matExpUbicacionDetalle>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Ubicación proveedor
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">location_on</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Proveedor:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtProveedor" />
                                    </mat-form-field>
                                </div>

                                <div *ngIf="bEsOrdenCompra" class="form-group col-md-4">
                                    <ng-select style="padding-bottom:3.5px; bottom:0.8rem"
                                        (change)="fnLLenarPuntoRecup($event)" appendTo="body" [clearable]="false"
                                        formControlName="cboPuntoRecup" placeholder="Punto proveedor" required>
                                        <ng-option *ngFor="let vPunto of lPuntoRecup" [value]="vPunto">
                                            {{ vPunto.sCodigo }} - {{ vPunto.sDestino }}
                                        </ng-option>
                                    </ng-select>
                                    <mat-error
                                        *ngIf="formIngresoDetalle.get('cboPuntoRecup').hasError('required') &&formIngresoDetalle.get('cboPuntoRecup').touched">
                                        .Obligatorio
                                    </mat-error>
                                </div>

                                <div *ngIf="!bEsOrdenCompra" class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Punto proveedor:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtPuntoRecup" />
                                    </mat-form-field>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Ubicación:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtUbicación" />
                                    </mat-form-field>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Dirección:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtDireccion" />
                                    </mat-form-field>
                                </div>

                            </div>
                        </mat-expansion-panel>
                    </div>

                    <div class="col-md-12">
                        <br>
                    </div>
                </form>

                <!--Form cuando es alguno tipo de nota-->
                <form class="row" *ngIf="pIdRegistro != 0 && (bEsNotaIngreso || bEsNotaRecojo)"
                    [formGroup]="formNotaIngreso">
                    <div class="col-md-10">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Presupuesto:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtPresupuesto" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Cliente:</mat-label>
                                    <input type="text" style="color: rgb(236, 0, 140);" readonly matInput
                                        formControlName="txtCliente" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Solicitante:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtSolicitante" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Almacén:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtAlmacen" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4">
                                <ng-select style="padding-bottom:3.5px; bottom:0.45rem" appendTo="body"
                                    [clearable]="false" formControlName="cboOperacionLogistica"
                                    placeholder="Operación Logística" required>
                                    <ng-option *ngFor="let vOpLog of lOpLogistica" [value]="vOpLog.nId">
                                        {{ vOpLog.sDescripcion }}
                                    </ng-option>
                                </ng-select>
                                <mat-error
                                    *ngIf="formNotaIngreso.get('cboOperacionLogistica').hasError('required') &&formNotaIngreso.get('cboOperacionLogistica').touched">
                                    .Obligatorio
                                </mat-error>
                            </div>

                            <div class="form-group col-md-4">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha de Ingreso:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFechaIngreso" />
                                </mat-form-field>
                            </div>


                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>GR:</mat-label>
                                    <mat-select formControlName="cboTipoGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vTipo of lTipoGuia" [value]="vTipo.nId">
                                            {{ vTipo.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formNotaIngreso.get('cboTipoGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia1', formNotaIngreso, 4)" type="text"
                                        matInput formControlName="txtNumGuia1" />
                                    <mat-error *ngIf="formNotaIngreso.get('txtNumGuia1').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formNotaIngreso.get('txtNumGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtNumGuia2', formNotaIngreso, 10)"
                                        type="text" matInput formControlName="txtNumGuia2" />
                                    <mat-error *ngIf="formNotaIngreso.get('txtNumGuia2').hasError('required')">
                                        .Obligatorio</mat-error>
                                    <mat-error *ngIf="formNotaIngreso.get('txtNumGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>FV:</mat-label>
                                    <mat-select formControlName="cboDocGuia" [errorStateMatcher]="matcher">
                                        <mat-option *ngFor="let vDoc of lDocGuia" [value]="vDoc.nId">
                                            {{ vDoc.sDescripcion }}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="formNotaIngreso.get('cboDocGuia').hasError('required')">
                                        .Obligatorio</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-1 col-3">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Serie:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia1', formNotaIngreso, 4)" type="text"
                                        matInput formControlName="txtDocGuia1" />
                                    <mat-error *ngIf="formNotaIngreso.get('txtDocGuia1').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input (blur)="fnLLenarCerosAdelante('txtDocGuia2', formNotaIngreso, 10)"
                                        type="text" matInput formControlName="txtDocGuia2" />
                                    <mat-error *ngIf="formNotaIngreso.get('txtDocGuia2').hasError('pattern')">
                                        .Solo números</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Observaciones:</mat-label>
                                    <input (input)="fnDarValor(formNotaIngreso, 'txtObservacion', $event)" type="text"
                                        matInput formControlName="txtObservacion" />
                                    <mat-error
                                        *ngIf="formNotaIngreso.get('txtObservacion').hasError('caracterValidator')">
                                        .El texto no debe contener: "/", "|", "?"</mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-4 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Observaciones Doc. Referencia:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtObservacionDocRef" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Unidades:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Peso:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Volumen:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalVolumen" />
                                </mat-form-field>
                            </div>

                            <div class="form-group col-md-2 col-6 ocultar-mobile">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Total Precio:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                </mat-form-field>
                            </div>

                            <!--Informacion en celular-->
                            <div class="col-md-12 mostrar-mobile">
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                            Datos
                                        </mat-panel-title>
                                        <button mat-icon-button>
                                            <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                        </button>
                                    </mat-expansion-panel-header>
                                    <div class="row">
                                        <div class="form-group col-md-4">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Observaciones:</mat-label>
                                                <input (input)="fnDarValor(formNotaIngreso, 'txtObservacion', $event)"
                                                    type="text" matInput formControlName="txtObservacion" />
                                                <mat-error
                                                    *ngIf="formIngreso.get('txtObservacion').hasError('caracterValidator')">
                                                    .El texto no debe contener: "/", "|", "?"</mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-4">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Observaciones Doc. Referencia:</mat-label>
                                                <input type="text" readonly matInput
                                                    formControlName="txtObservacionDocRef" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Unidades:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalUnd" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Peso:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPeso" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Volumen:</mat-label>
                                                <input type="text" readonly matInput
                                                    formControlName="txtTotalVolumen" />
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3 col-6">
                                            <mat-form-field style="width: 100%">
                                                <mat-label>Total Precio:</mat-label>
                                                <input type="text" readonly matInput formControlName="txtTotalPrecio" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                            </div>

                            <div class="col-md-12 mostrar-mobile">
                                <br>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en desktop-->
                    <div class="col-md-2 ocultar-mobile">
                        <div class="form-row">
                            <div class="col-md-1">
                                <div class="clsSeparador">&nbsp;</div>
                            </div>

                            <!-- Campos auditoria -->
                            <div class="col-md-11">
                                <mat-form-field style="width: 100%">
                                    <mat-label>Número:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtNumero" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Doc. Referencia:</mat-label>
                                    <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                        formControlName="txtDocRef" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Fecha Registro:</mat-label>
                                    <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                </mat-form-field>

                                <mat-form-field style="width: 100%">
                                    <mat-label>Estado:</mat-label>
                                    <input type="text" readonly matInput placeholder="Estado"
                                        formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                        [errorStateMatcher]="matcher" />
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <!--Informacion en celular-->
                    <div class="col-md-12 mostrar-mobile">
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Información
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">info</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-md-12">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Número:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtNumero" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Doc. Referencia:</mat-label>
                                        <input style="color: rgb(236, 0, 140)" type="text" readonly matInput
                                            formControlName="txtDocRef" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Fecha Registro:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtFechaRegistro" />
                                    </mat-form-field>

                                    <mat-form-field style="width: 100%">
                                        <mat-label>Estado:</mat-label>
                                        <input type="text" readonly matInput placeholder="Estado"
                                            formControlName="txtEstado" style="color: rgb(236, 0, 140)"
                                            [errorStateMatcher]="matcher" />
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </div>

                    <div class="col-md-12 mostrar-mobile">
                        <br>
                    </div>

                    <div class="col-md-12">
                        <mat-expansion-panel #matExpUbicacionNota>
                            <mat-expansion-panel-header>
                                <mat-panel-title style="color: #002c4b; font-weight: bold; padding-top: 10px;">
                                    Ubicación proveedor
                                </mat-panel-title>
                                <button mat-icon-button>
                                    <mat-icon style="margin-right: 10px;" color="accent">location_on</mat-icon>
                                </button>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="form-group col-md-4">
                                    <ng-select style="padding-bottom:3.5px; bottom:0.8rem"
                                        (change)="fnListarDireccion($event)" appendTo="body" [clearable]="false"
                                        formControlName="cboProveedor" placeholder="Proveedor" required>
                                        <ng-option *ngFor="let vProveedor of lProveedor" [value]="vProveedor">
                                            {{ vProveedor.sDescripcion }}
                                        </ng-option>
                                    </ng-select>
                                    <mat-error
                                        *ngIf="formNotaIngreso.get('cboProveedor').hasError('required') &&formNotaIngreso.get('cboProveedor').touched">
                                        .Obligatorio
                                    </mat-error>
                                </div>

                                <div class="form-group col-md-4">
                                    <ng-select style="padding-bottom:3.5px; bottom:0.8rem"
                                        (change)="fnLLenarPuntoRecupNota($event)" appendTo="body" [clearable]="false"
                                        formControlName="cboPuntoRecup" placeholder="Punto proveedor" required>
                                        <ng-option *ngFor="let vPunto of lPuntoRecup" [value]="vPunto">
                                            {{ vPunto.sCodigo }} - {{ vPunto.sDestino }}
                                        </ng-option>
                                    </ng-select>
                                    <mat-error
                                        *ngIf="formNotaIngreso.get('cboPuntoRecup').hasError('required') &&formNotaIngreso.get('cboPuntoRecup').touched">
                                        .Obligatorio
                                    </mat-error>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Ubicación:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtUbicación" />
                                    </mat-form-field>
                                </div>

                                <div class="form-group col-md-4">
                                    <mat-form-field style="width: 100%">
                                        <mat-label>Dirección:</mat-label>
                                        <input type="text" readonly matInput formControlName="txtDireccion" />
                                    </mat-form-field>
                                </div>

                            </div>
                        </mat-expansion-panel>
                    </div>

                    <div class="col-md-12">
                        <br>
                    </div>
                </form>

            </mat-card>
        </div>

        <div class="row">
            <br />
        </div>

        <div class="col-md-10 offset-md-1">
            <div class="row">
                <!--Table para detalle de registro de ingreso -->
                <div class="col-12">
                    <!--Boton cuando se agrega articulo para una guia-->
                    <button *ngIf="pIdRegistro == 0" matTooltipPosition="left" matTooltip="Agregar detalle"
                        mat-raised-button mat-mini-fab class="boton-MatTable" color="accent"
                        (click)="fnAgregarArticulo()">
                        <i class="material-icons">add</i>
                    </button>

                    <!--Boton cuando se agrega articulo para una OC-->
                    <button *ngIf="bEsOrdenCompra" matTooltipPosition="left" matTooltip="Agregar detalle"
                        mat-raised-button mat-mini-fab class="boton-MatTable" color="accent"
                        (click)="fnAgregarArticuloOC()">
                        <i class="material-icons">add</i>
                    </button>

                    <!--Boton cuando se agrega articulo para una NI-->
                    <button *ngIf="bEsNotaIngreso || bEsNotaRecojo" matTooltipPosition="left"
                        matTooltip="Agregar detalle" mat-raised-button mat-mini-fab class="boton-MatTable"
                        color="accent" (click)="fnAgregarArticuloNI()">
                        <i class="material-icons">add</i>
                    </button>

                    <div id="listaMobile" class="mat-elevation-z8">
                        <div class="table-container-1">
                            <table mat-table [dataSource]="dataSource" matSort>
                                <ng-container matColumnDef="opcion">
                                    <th mat-header-cell *matHeaderCellDef class="clsColumnaOpc2"></th>
                                    <td data-label="Opciones: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        <button mat-icon-button [matMenuTriggerFor]="menu" matTooltip="Desplegar"
                                            matTooltipPosition="right" mat-stroked-button color="accent">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #menu="matMenu" xPosition="after">

                                            <button *ngIf="bEsGuiaLucky" mat-menu-item
                                                (click)="fnModificarArticuloGuiaLucky(row)">
                                                <mat-icon color="accent">edit</mat-icon>
                                                <span>Modificar</span>
                                            </button>

                                            <button *ngIf="bEsNotaRecojo && row.nIdArticulo!=0" mat-menu-item
                                                (click)="fnModificarArticuloNR(row)">
                                                <mat-icon color="accent">edit</mat-icon>
                                                <span>Modificar</span>
                                            </button>

                                            <button *ngIf="bEsNotaIngreso || bEsOrdenCompra || (this.pIdRegistro==0)"
                                                mat-menu-item (click)="fnModificarArticulo(row)">
                                                <mat-icon color="accent">edit</mat-icon>
                                                <span>Modificar</span>
                                            </button>

                                            <button *ngIf="bEsNotaRecojo &&  row.nIdArticulo==0" mat-menu-item
                                                (click)="fnAgregarArticuloNR(row)">
                                                <mat-icon color="accent">touch_app</mat-icon>
                                                <span>Agregar articulo</span>
                                            </button>

                                            <button [disabled]="row.sRutaArchivo==''" mat-menu-item
                                                (click)="fnVerImagen(row)">
                                                <mat-icon color="accent">image</mat-icon>
                                                <span>Ver foto</span>
                                            </button>

                                            <button *ngIf="!this.bEsNotaDetalle"
                                                [disabled]="row.nIdArticulo==0 || row.sLote==''" mat-menu-item
                                                [ngClass]="bMostrarUbicacion ? '' : 'ocultar-ubicacion'"
                                                (click)="fnModalUbicacionArticulo(row)">
                                                <mat-icon color="accent">grid_on</mat-icon>
                                                <span>Ubicación</span>
                                            </button>

                                            <button *ngIf="pIdRegistro == 0" matTooltip="Eliminar" mat-menu-item
                                                (click)="fnEliminarArticulo(row)">
                                                <mat-icon color="accent">delete</mat-icon>
                                                <span>Eliminar</span>
                                            </button>

                                            <button *ngIf="bEsOrdenCompra" matTooltip="Eliminar" mat-menu-item
                                                (click)="fnEliminarArticuloOC(row)">
                                                <mat-icon color="accent">delete</mat-icon>
                                                <span>Eliminar</span>
                                            </button>

                                            <button *ngIf="bEsNotaIngreso || bEsNotaRecojo" matTooltip="Eliminar"
                                                mat-menu-item (click)="fnEliminarArticuloNota(row)">
                                                <mat-icon color="accent">delete</mat-icon>
                                                <span>Eliminar</span>
                                            </button>
                                        </mat-menu>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sArticulo">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge">
                                        Artículo
                                    </th>
                                    <td data-label="Artículo: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaLarge">
                                        {{ row.sArticulo }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sLote">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Lote
                                    </th>
                                    <td data-label="Lote: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.sLote }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sFechaExpira">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Fecha Expira
                                    </th>
                                    <td data-label="Fecha Expira: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.sFechaExpira }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sUndMedida">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Ud. Medida
                                    </th>
                                    <td data-label="Ud. Medida: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.sUndMedida }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="nStock">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Stock
                                    </th>
                                    <td data-label="Stock: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.nStock }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="nUnidades">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Unidades
                                    </th>
                                    <td data-label="Unidades: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.nUnidades }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sZona">
                                    <th [ngClass]="bMostrarUbicacion ? '' : 'ocultar-ubicacion'" mat-header-cell
                                        *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Ubicado
                                    </th>
                                    <td [ngClass]="bMostrarUbicacion ? '' : 'ocultar-ubicacion'" data-label="Ubicado: "
                                        mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.sZona }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="nCostoUnit">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Costo Ud.
                                    </th>
                                    <td data-label="Costo Ud.: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.nCostoUnit | number: "1.4-4" }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="nCostoTotal">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaOpc2">
                                        Costo Total
                                    </th>
                                    <td data-label="Costo Total: " mat-cell *matCellDef="let row"
                                        class="has_label_on_mobile clsColumnaOpc2">
                                        {{ row.nCostoTotal | number: "1.4-4" }}
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                            </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[10, 20, 40]"></mat-paginator>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <br />
</div>

<!--Zona de botones flotantes-->
<div class="fab-container">
    <button mat-mini-fab class="fab-toggler" (click)="onToggleFab(1, -1)">
        <i class="material-icons" [@fabToggler]="{value: tsLista}">add</i>
    </button>
    <div [@speedDialStagger]="abLista">

        <!--Para duplicar-->
        <button
            *ngIf="(!bEsGuiaLucky && !bEsOrdenCompra && !bEsGuiaSalida && !bEsNotaIngreso && !bEsNotaDetalle &&!this.bEsNotaRecojo && pIdRegistro!=0) && abLista>0"
            mat-raised-button mat-mini-fab matTooltipPosition="left" class="fab-secondary" matTooltip="Duplicar"
            color="secondary" (click)="fnDuplicarGuia()"><i class="material-icons">file_copy</i></button>

        <!--Para los archivos-->
        <button
            *ngIf="(!bEsGuiaLucky && !bEsOrdenCompra && !bEsGuiaSalida && !bEsNotaIngreso && !bEsNotaDetalle &&!this.bEsNotaRecojo && pIdRegistro!=0) && abLista>0"
            mat-raised-button mat-mini-fab matTooltipPosition="left" class="fab-secondary"
            matTooltip="Adjuntar archivos" color="secondary" (click)="fnArchivo()"><i
                class="material-icons">attach_file</i></button>

        <!--Para guardar-->
        <button *ngIf="pIdRegistro == 0 && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardar()">
            <i class="material-icons">save</i>
        </button>

        <!--Para guardar OC-->
        <button *ngIf="bEsOrdenCompra && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardarOC()">
            <i class="material-icons">save</i>
        </button>

        <!--Para guardar guias de salida-->
        <button *ngIf="bEsGuiaSalida && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardarGuiaAnulada()"><i
                class="material-icons">save</i></button>

        <!--Para procesar guias lucky-->
        <button *ngIf="bEsGuiaLucky && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardarGuiaLucky()">
            <i class="material-icons">save</i>
        </button>

        <!--Para procesar NI-->
        <button *ngIf="bEsNotaIngreso && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardarNotaIngreso()">
            <i class="material-icons">save</i>
        </button>

        <!--Para procesar NR-->
        <button *ngIf="bEsNotaRecojo && abLista>0" matTooltipPosition="left" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltip="Registrar guía" color="secondary" (click)="fnGuardarNotaRecojo()">
            <i class="material-icons">save</i>
        </button>

        <!--Para devolver-->
        <button *ngIf="(bEsNotaIngreso || this.bEsNotaRecojo) && abLista>0" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltipPosition="left" matTooltip="Devolver" color="secondary"
            (click)="fnDevolverNota()"><i class="material-icons">reply</i></button>

        <!--Para rechazar-->
        <button *ngIf="(bEsNotaIngreso || this.bEsNotaRecojo)  && abLista>0" mat-raised-button mat-mini-fab
            class="fab-secondary" matTooltipPosition="left" matTooltip="Rechazar" color="secondary"
            (click)="fnRechazarNota()"><i class="material-icons">block</i></button>

        <!--Para actualizar datos-->
        <button
            *ngIf="(bEsGuiaLucky || bEsOrdenCompra || bEsGuiaSalida || bEsNotaIngreso || this.bEsNotaRecojo || pIdRegistro==0) && abLista>0"
            mat-raised-button mat-mini-fab matTooltipPosition="left" class="fab-secondary" matTooltip="Actualizar"
            color="secondary" (click)="fnActualizar()">
            <mat-icon>refresh</mat-icon>
        </button>

        <!--Para salir-->
        <button *ngIf="abLista>0" mat-raised-button mat-mini-fab matTooltipPosition="left" class="fab-secondary"
            matTooltip="Salir" color="warn" (click)="fnRegresar()">
            <i class="material-icons">exit_to_app</i>
        </button>
    </div>
</div>