<div class="mb-3 col-md-12">

    <!-- Card Header Titulo-->
    <div class="text-center mt-0 mb-2">
        <h4 class="col-md-10 offset-md-1 card-header mb-4">
            Reporte presupuestos pendientes de facturar
        </h4>
    </div>

    <!-- Botones Flotantes -->
    <div class="fab-container">
        <button mat-mini-fab class="fab-toggler" (click)="onToggleFab(1, -1)">
            <i class="material-icons" [@fabToggler]="{value: tsLista}">add</i>
        </button>
        <div [@speedDialStagger]="abLista.length">
            <button *ngFor="let btn of abLista; let ibtn = index;" mat-mini-fab class="fab-secondary"
                color="secondary" (click)="clickFab(ibtn)">
                <i class="material-icons" matTooltip="{{btn.tool}}" matTooltipPosition="left">{{btn.icon}}</i>
            </button>
        </div>
    </div>
    
    <div class="card mt-3 mb-4">
        <div class="card-body">

            <div class="col-md-12">
                <form autocomplete="off" [formGroup]="formPendienteFacturar">
                    <div class="row">

                        <div class="col-md-6 text-align">
                            Seleccionar Año:
                        </div>

                        <div class="col-md-6">
                            <div class="col-md-10">
                                <ng-select appendTo="body" [clearable]="true" placeholder="Seleccionar Año"
                                    formControlName="anio" notFoundText="No hay años registrados">
                                    <ng-option *ngFor="let item of lAnio" [value]="item.anio">
                                        {{item.anio}}</ng-option>
                                </ng-select>
                            </div>
                        </div>

                    </div>

                </form>
            </div>

        </div>
    </div>

    <!-- Listado de Ppto pendientes de facturar -->
    <div *ngIf="tablaEstado" id="listaMobile" class="mat-elevation-z8">
        <div class="example-container">

            <table mat-table [dataSource]="dataSource" matSort>

                <!-- Columna Año -->
                <ng-container matColumnDef="anio">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña">
                        Año
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Año: '>
                        {{row.anio}}
                    </td>
                </ng-container>

                <!-- Columna Directora General -->
                <ng-container matColumnDef="directoraGeneral">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaMediana">
                        Directora General
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Directora General: '>
                        {{row.directoraGeneral}}
                    </td>
                </ng-container>

                <!-- Columna Gerente de Cuentas -->
                <ng-container matColumnDef="gerenteCuentas">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaMediana">
                        Gerente de Cuentas
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Gerente de Cuentas: '>
                        {{row.gerenteCuentas}}
                    </td>
                </ng-container>

                <!-- Columna Ejecutivo -->
                <ng-container matColumnDef="ejecutivo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaMediana"> Ejecutivo (a) </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Ejecutivo (a): '>
                        {{row.ejecutivo}}
                    </td>
                </ng-container>

                <!-- Columna Presupuesto -->
                <ng-container matColumnDef="presupuesto">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Presupuesto </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Presupuesto: '>
                        {{row.presupuesto}}
                    </td>
                </ng-container>

                <!-- Columna Nombre Presupuesto -->
                <ng-container matColumnDef="nombrePresupuesto">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaGrande"> Nombre Presupuesto
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Nombre Presupuesto: '>
                        {{row.nombrePresupuesto}}
                    </td>
                </ng-container>

                <!-- Columna Estado Presupuesto -->
                <ng-container matColumnDef="estadoPpto">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Estado Ppto </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Estado Ppto: '>
                        {{row.estadoPresupuesto}}
                    </td>
                </ng-container>

                <!-- Columna Fecha Inicio -->
                <ng-container matColumnDef="fechaInicio">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> F. Inicio </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='F. Inicio: '>
                        {{row.fechaInicio}}
                    </td>
                </ng-container>

                <!-- Columna Fecha Fin -->
                <ng-container matColumnDef="fechaFin">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> F. Fin </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='F. Fin: '>
                        {{row.fechaFin}}
                    </td>
                </ng-container>

                <!-- Columna Cliente -->
                <ng-container matColumnDef="cliente">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Cliente </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Cliente: '>
                        {{row.cliente}}
                    </td>
                </ng-container>

                <!-- Columna Sub Total -->
                <ng-container matColumnDef="subTotal">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Sub Total </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Sub Total: '>
                        {{row.subTotal}}
                    </td>
                </ng-container>

                <!-- Columna Descuento -->
                <ng-container matColumnDef="descuento">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Descuento </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Descuento: '>
                        {{row.descuento}}
                    </td>
                </ng-container>

                <!-- Columna Total Fee -->
                <ng-container matColumnDef="totalFee">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Total Fee </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Total Fee: '>
                        {{row.totalFee}}
                    </td>
                </ng-container>

                <!-- Columna Total Presupuesto -->
                <ng-container matColumnDef="totalPresupuesto">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Total Presupuesto
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Total Presupuesto: '>
                        {{row.totalPresupuesto}}
                    </td>
                </ng-container>

                <!-- Columna Ciudad -->
                <ng-container matColumnDef="ciudad">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Ciudad </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Ciudad: '>
                        {{row.ciudad}}
                    </td>
                </ng-container>

                <!-- Columna Total Ciudad -->
                <ng-container matColumnDef="totalCiudad">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Total Ciudad </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Total Ciudad: '>
                        {{row.totalCiudad}}
                    </td>
                </ng-container>

                <!-- Columna % Pendiente Facturar -->
                <ng-container matColumnDef="pendientefacturar">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> % Pendiente por
                        facturar </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile"
                        data-label='% Pendiente por facturar: '>
                        {{row.pendienteFacturar}}
                    </td>
                </ng-container>

                <!-- Columna Importe Pendiente -->
                <ng-container matColumnDef="importePendiente">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="columnaPequeña"> Importe pendiente
                    </th>
                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile" data-label='Importe pendiente: '>
                        {{row.importePendiente}}
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

            </table>
        </div>
        <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
    </div>
    
</div>