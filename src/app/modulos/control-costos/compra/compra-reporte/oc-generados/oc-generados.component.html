<div class="clsprincipal">
    <div class="col-md-10 offset-md-1">
        <h5 class="card-header center-text-card">Informe de OC Generados</h5>
    </div>

    <div>
        <div class="col-md-10 offset-md-1">

            <div class="form-row" style="margin-top: 15px;">
                <div class="form-group col-md-12">
                    <!-- Inicio del contenido -->
                    <div class="col-md-12">
                        <form [formGroup]="formOrdenCompra">

                            <mat-card>
                                <div class="form-row">

                                    <mat-radio-group formControlName="rbPDF" class="form-group row col-md-12"
                                        aria-label="Seleccione">
                                        <div class="col-md-1 spaces"><br></div>
                                            <mat-radio-button style="padding-top: 15px;" class="col-md-5" [value]="0">OC sin PDF de la factura
                                            </mat-radio-button>
                                            <mat-radio-button style="padding-top: 15px;" class="col-md-5" [value]="1">OC con PDF de la factura
                                            </mat-radio-button>
                                        <div class="col-md-1 spaces"><br></div>
                                    </mat-radio-group>


                                    <mat-radio-group formControlName="rbGerenteCostos" class="form-group row col-md-12"
                                        aria-label="Seleccione" style="margin-top:12px;">
                                        <div class="col-md-1 spaces"><br></div>
                                        <mat-radio-button class="col-md-5" [value]="0">Sin VB de Gerente de costos
                                        </mat-radio-button>
                                        <mat-radio-button class="col-md-5" [value]="1">Con VB de Gerente de costos
                                        </mat-radio-button>
                                        <div class="col-md-1 spaces"><br></div>
                                    </mat-radio-group>

                                </div>
                            </mat-card>
                            <!-- Busqueda Avanzada -->
                            <mat-expansion-panel style="width: 100%;">
                                <mat-expansion-panel-header>
                                    <mat-panel-title style="color: #002c4b; font-weight: bold;padding-top: 10px;">
                                        Buscar con más filtros:
                                    </mat-panel-title>
                                    <mat-panel-description style="margin-right: 0px">
                                    </mat-panel-description>
                                    <button mat-icon-button>
                                        <mat-icon style="margin-right: 10px;" color="accent">date_range</mat-icon>
                                    </button>
                                </mat-expansion-panel-header>
                                <!-- filtro de OC por fecha/hora -->
                                <mat-card>
                                    <div class="form-row">
                                        <div class="col-md-10 offset-md-1 d-flex align-content-center">
                                            <p class="d-flex align-items-center" style="color: #002c4b;font-weight:bold;">
                                                OC(Envio) por fecha:
                                            </p>
                                        </div>

                                        <div class="col-md-1 spaces"><br></div>
                                        <div class="col-md-1 spaces"><br></div>

                                        <div class="form-group col-md-3">
                                            <mat-form-field style="width: 70%;">
                                                <mat-label>Año:</mat-label>
                                                <mat-select formControlName="cboAnio">
                                                    <mat-option>Seleccione</mat-option>
                                                    <mat-option *ngFor="let vAnio of lAnio" [value]="vAnio.sDesc">
                                                        {{vAnio.sDesc}}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="formOrdenCompra.get('cboAnio').hasError('required')">
                                                    .Obligatorio
                                                </mat-error>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-4" style="display: inline-block;">
                                            <mat-checkbox (change)="fncbMes();" color="primary" style="margin-right: 5px;"
                                                formControlName="cbMes">
                                            </mat-checkbox>
                                            <mat-form-field style="width: 70%;">
                                                <mat-label>Mes:</mat-label>
                                                <mat-select formControlName="cboMes" [errorStateMatcher]="matcher">
                                                    <mat-option>Seleccione</mat-option>
                                                    <mat-option (click)="fnCambiarDias(vMes.nCod)" *ngFor="let vMes of lMes"
                                                        [value]="vMes.nCod">
                                                        {{vMes.sDesc}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-3">
                                            <mat-checkbox color="primary" (change)="fncbDia()" style="margin-right: 5px;"
                                                formControlName="cbDia">
                                            </mat-checkbox>
                                            <mat-form-field style="width: 70%;">
                                                <mat-label>Día:</mat-label>
                                                <mat-select formControlName="cboDia" [errorStateMatcher]="matcher">
                                                    <mat-option>Seleccione</mat-option>
                                                    <mat-option *ngFor="let vDia of lDia" [value]="vDia">
                                                        {{vDia}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                        <div class="col-md-1 spaces"><br></div>
                                        <div class="col-md-1 spaces"><br></div>

                                        <div class="form-group d-flex align-content-center col-12 col-md-3">
                                            <p class="d-flex align-items-center">
                                                Incluir horas:
                                            </p>
                                        </div>
                                        <div class="form-group col-6 col-md-2">
                                            <mat-checkbox color="primary" (change)="fncbHora();" style="margin-right: 5px;"
                                                formControlName="cbHora">
                                            </mat-checkbox>
                                            <mat-form-field style="width: 70%;">
                                                <mat-label>Hora:</mat-label>
                                                <mat-select formControlName="cboHora" [errorStateMatcher]="matcher">
                                                    <mat-option *ngFor="let vHora of lHora" [value]="vHora">
                                                        {{vHora}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-6 col-md-2">
                                            <mat-form-field style="width: 70%;">
                                                <mat-label>Minuto:</mat-label>
                                                <mat-select formControlName="cboMinuto" [errorStateMatcher]="matcher">
                                                    <mat-option *ngFor="let vMinuto of lMinuto" [value]="vMinuto">
                                                        {{vMinuto}}</mat-option>
                                                </mat-select>

                                            </mat-form-field>
                                        </div>
                                        <div class="col-md-1 spaces"><br></div>

                                    </div>
                                </mat-card>
                                <!-- Filtro de OC con pdf -->
                                <mat-card>
                                    <div class="form-row">
                                        <div class="col-md-10 offset-md-1 d-flex align-content-center">
                                            <mat-checkbox (change)="fnRangoFecha();" color="primary" style="margin-right: 5px;"
                                                formControlName="cbRango"
                                            >
                                            </mat-checkbox>
                                            <p class="d-flex align-items-center"  style="color: #002c4b;font-weight:bold;">
                                                Ordenes de Compra con pdf de Factura en rango de Fechas
                                            </p>
                                        </div>
                                        <div class="form-group offset-md-1 d-flex align-content-center col-md-3 col-sm-3 col-10" style="margin-right: 10px; padding-top: 8px;">
                                            <mat-form-field color="primary" style="width: 100%"   >
                                                <mat-label>Fecha Inicio</mat-label>
                                                <input matInput [matDatepicker]="picker" formControlName="fechaInicio" [readonly]="true" >
                                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                                <mat-datepicker #picker color="primary"></mat-datepicker>
                                            </mat-form-field>
                                        </div>
                                        <div class="form-group col-md-3 col-sm-3 col-10" style="padding-top: 8px;">
                                            <mat-form-field color="primary" style="width: 100%"  >
                                                <mat-label>Fecha Fin</mat-label>
                                                <input matInput [matDatepicker]="pickerfin" formControlName="fechaFin" [readonly]="true" >
                                                <mat-datepicker-toggle matSuffix [for]="pickerfin"></mat-datepicker-toggle>
                                                <mat-datepicker #pickerfin color="primary" ></mat-datepicker>
                                            </mat-form-field>
                                        </div>

                                        <div class="form-group col-md-4 col-sm-4 col-12" style="margin-top: -7px; margin-left: 5px;">
                                                <ng-select appendTo="body" formControlName="nusuario" [clearable]="false" placeholder="Cliente">
                                                    <ng-option *ngFor="let usuario of listaUsuario" [value]="usuario.nIdCliente" >{{ usuario.sCliente }}</ng-option>
                                                </ng-select>
                                        </div>
                                    </div>
                                </mat-card>
                            </mat-expansion-panel>

                            <!-- Filtro de OC por Usuario -->
                            <mat-card>
                                <div class="form-row">
                                    <div class="row" style="width: 100%;">

                                        <mat-radio-group style="width: 100%;" formControlName="rbUsuario"
                                            class="col-md-10 offset-md-1">
                                            <div class="form-row col-md-12">
                                                <div style="padding-left: 0px !important;"
                                                    class="d-flex align-content-center">
                                                    <mat-radio-button (click)="fnCambiarUsuario(0)" style="padding-top: 15px;"
                                                        class="form-group d-flex align-items-center" [value]="0">
                                                        Todos los usuarios
                                                    </mat-radio-button>
                                                </div>
                                            </div>

                                            <div class="form-row col-md-12">
                                                <div style="padding-left: 0px !important;"
                                                    class="col-md-4 d-flex align-content-center">
                                                    <mat-radio-button (click)="fnCambiarUsuario(1)"
                                                        class="form-group d-flex align-items-center" [value]="1">
                                                        Usuario específico
                                                    </mat-radio-button>
                                                </div>

                                                <div class="form-group col-md-6" >
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>Usuario:</mat-label>
                                                        <mat-select formControlName="cboUsuario"
                                                            [errorStateMatcher]="matcher">
                                                            <mat-option>Seleccione</mat-option>
                                                            <mat-option *ngFor="let vUsuario of lUSuario"
                                                                [value]="vUsuario.nId">
                                                                {{vUsuario.sNombre}}</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>

                                            </div>
                                        </mat-radio-group>
                                    </div>
                                </div>
                            </mat-card>
                        </form>
                    </div>

                </div>
                <div [ngStyle]="{display: (nMostrar==1) ? 'block' : 'none'}" class="form-group col-md-12">

                    <div id="listaMobile" class="mat-elevation-z8">
                        <div class="example-container">
                            <table mat-table [dataSource]="dataSource" matSort>

                                <ng-container matColumnDef="sFechaEnvio">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib"> Fecha envío
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib" data-label='Fecha envío: '> {{row.sFechaEnvio}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sCentroCosto">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge">Presupuesto
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLarge" data-label='Presupuesto: '> {{row.sCentroCosto}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sDocumento">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib"> Número OC
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib" data-label='Número OC: '> {{row.sDocumento}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sTituloOC">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge"> Título
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLarge" data-label='Título: '> {{row.sTituloOC}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sTipoOC">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Tipo OC
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Tipo OC: '> {{row.sTipoOC}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sCliente">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge"> Cliente
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLarge" data-label='Cliente: '>{{row.sCodigoCliente}} - {{row.sDescCliente}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sDescComprador">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib"> Comprador
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib" data-label='Comprador: '> {{row.sDescComprador}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sDescProveedor">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge"> Proveedor
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLarge" data-label='Proveedor: '> {{row.sDescProveedor}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sDescSolicitante">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLarge">Solicitante
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLarge" data-label='Solicitante: '> {{row.sDescSolicitante}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sFechaCreado">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> F. Creado
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='F. Creado: '> {{row.sFechaCreado}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sFechaModificado">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> F. Modificado
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='F. Modificado: '> {{row.sFechaModificado}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sEstado">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib"> Estado
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib" data-label='Estado: '> {{row.sEstado}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sTipoMoneda">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Moneda
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Moneda: '> {{row.sTipoMoneda}} </td>
                                </ng-container>

                                <ng-container matColumnDef="nTotal">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Total
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Total: '> {{row.nTotal | number:'1.4-4'}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sDescFactura">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Factura
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Factura: '> {{row.sDescFactura}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sFechaFactura">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Fecha factura
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Fecha factura: '> {{row.sFechaFactura}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sFacturaLimite">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Factura limite
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Factura limite: '> {{row.sFacturaLimite}} </td>
                                </ng-container>

                                <ng-container matColumnDef="sFacturaDocumento">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> Factura PDF
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='Factura PDF: '> {{row.sFacturaDocumento}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="sVBGerenteDoc">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="clsColumnaLib2"> VB Gerente
                                        de Costos
                                    </th>
                                    <td mat-cell *matCellDef="let row" class="has_label_on_mobile clsColumnaLib2" data-label='VB Gerente: '> {{row.sVBGerenteDoc}} </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                                </tr>
                            </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Zona de botones flotantes-->
<div class="fab-container">
    <div>
        <button mat-raised-button mat-mini-fab class="fab-secondary" matTooltipPosition="left" matTooltip="Buscar"
            color="secondary" (click)="fnGenerarReporte()"><i class="material-icons">search</i>
        </button>

        <button mat-raised-button mat-mini-fab [disabled]="nMostrar==0" class="fab-secondary" matTooltipPosition="left" matTooltip="Descargar Archivo"
            color="secondary" (click)="fnDescargarExcel()"><i class="material-icons">cloud_download</i>
        </button>

    </div>
</div>

<!-- <div class="form-group col-md-2">
    <button type="button"
        mat-raised-button color="primary" (click)="fnGenerarReporte()" matTooltip="Buscar">
        <i class="material-icons">search</i>Buscar
    </button>
</div>

<div class="form-group col-md-2">
    <button type="button"
        mat-raised-button color="accent" [disabled]="nMostrar==0" (click)="fnDescargarExcel()" matTooltip="Descargar excel">
        <i class="material-icons">text_snippet</i>Descargar
    </button>
</div> -->
